<m-container class="discover-listings-container">
  <h2 class="center-align">Discover Listings</h2>
  <div *ngIf="posts.length === 0">
    <p>No listings available.</p>
  </div>
  <div *ngFor="let post of posts" class="post-card">
    <img [src]="post.imageUrl" alt="{{ post.title }}" class="post-image">
    <div class="post-content">
      <h3>{{ post.title }}</h3>
      <p>{{ post.description }}</p>
      <p><strong>Category:</strong> {{ post.category }}</p>
      <p><strong>Availability:</strong> {{ post.availability }}</p>
      <button (click)="selectPost(post)" class="select-post-button">Send Message</button>
      <div *ngIf="selectedPost && selectedPost === post" class="selected-post">
        <h3>Send Message to {{ selectedPost.username }}</h3>
        <div>
          <label for="senderName">Your Name:</label>
          <input type="text" id="senderName" [(ngModel)]="senderName">
        </div>
        <div>
          <label for="whatsappNumber">Your WhatsApp Number:</label>
          <input type="text" id="whatsappNumber" [(ngModel)]="whatsappNumber">
        </div>
        <div>
          <label for="timeSlot">Select Time Slot:</label>
          <select id="timeSlot" [(ngModel)]="selectedTimeSlot">
            <option *ngFor="let slot of selectedPost.timeSlots" [ngValue]="slot">{{ slot.start }} - {{ slot.end }}</option>
          </select>
        </div>
        <div>
          <label for="messageContent">Message:</label>
          <textarea id="messageContent" [(ngModel)]="messageContent"></textarea>
        </div>
        <button (click)="sendMessage()" class="send-message-button">Send Message</button>
      </div>
    </div>
  </div>

  <div *ngIf="statusMessage" class="status-message">
    {{ statusMessage }}
  </div>
</m-container>

<style>
.post-card {
  margin-bottom: 20px;
  padding: 10px;
  border: 1px solid #d6e9c6;
  border-radius: 4px;
  display: flex;
  cursor: pointer;
}

.post-image {
  width: 100px;
  height: 100px;
  object-fit: cover;
  margin-right: 10px;
}

.post-content {
  padding: 10px;
  flex-grow: 1;
}

.select-post-button {
  background-color: #007bff;
  color: white;
  padding: 10px 15px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.select-post-button:hover {
  background-color: #0056b3;
}

.selected-post {
  margin-top: 20px;
  padding: 10px;
  border: 1px solid #d6e9c6;
  border-radius: 4px;
}

.send-message-button {
  background-color: #28a745;
  color: white;
  padding: 10px 15px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-top: 10px;
}

.send-message-button:hover {
  background-color: #218838;
}

.status-message {
  background-color: #dff0d8;
  color: #3c763d;
  padding: 10px;
  border: 1px solid #d6e9c6;
  border-radius: 4px;
  margin-top: 20px;
}
</style>
