<m-container class="discover-listings-container">
  <br><br><br><br>
  <h2 class="center-align">Discover Listings</h2>

  <div *ngFor="let post of posts" class="card">
    <div class="card-image">
      <img *ngIf="post.imageUrl" [src]="post.imageUrl" alt="Image not available">
    </div>
    <div class="card-content">
      <span class="card-title">{{ post.title }}</span>
      <p><strong>Posted by:</strong> {{ post.username }}</p>
      <p><strong>Category:</strong> {{ post.category }}</p>
      <p><strong>Description:</strong> {{ post.description }}</p>
      <p><strong>Availability:</strong> {{ post.availability }}</p>
      <p><strong>Location:</strong> {{ post.location }}</p>
      <button (click)="selectPostOwner(post.username)" class="pure-button">Message Owner</button>
    </div>
  </div>

  <div *ngIf="selectedPostOwner">
    <h3>Send a Message to {{ selectedPostOwner }}</h3>
    <form class="pure-form pure-form-stacked" (ngSubmit)="sendMessage()">
      <div class="input-field">
        <label for="messageContent">Message</label>
        <textarea id="messageContent" class="materialize-textarea" placeholder="Your message..." [(ngModel)]="messageContent" name="messageContent" required></textarea>
      </div>
      <div class="center-align">
        <button class="pure-button" type="submit">Send Message</button>
      </div>
    </form>
  </div>
</m-container>

<style>
.success-message {
  background-color: #dff0d8;
  color: #3c763d;
  padding: 10px;
  border: 1px solid #d6e9c6;
  border-radius: 4px;
  margin-bottom: 20px;
}
.card {
  margin-bottom: 20px;
  padding: 10px;
  border: 1px solid #d6e9c6;
  border-radius: 4px;
}
.card-content {
  padding: 10px;
}
.card-image img {
  max-width: 100%;
  height: auto;
}
</style>
